CREATE DATABASE form_data;

USE form_data;

-- Създаване на таблица за потребителска информация
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,     -- Уникален идентификатор за всеки запис
    name VARCHAR(100) NOT NULL,            -- Име на потребителя 
    email VARCHAR(100) NOT NULL UNIQUE,    -- Имейл адрес на потребителя 
    message TEXT NOT NULL,                 -- Съобщение от потребителя 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- Дата и час на създаване на записа
);


Обяснение (на SQL):

1. "CREATE TABLE users" - Създава таблица с името "users" за съхранение на информацията
2. "id INT AUTO_INCREMENT PRIMARY KEY" -  Поле "id" е идентификатор който автоматично се увеличава с всеки нов запис
3. "name VARCHAR(100) NOT NULL" - Поле "name" е текстово поле с максимална дължина 100 символа и е задължително
4. "email VARCHAR(100) NOT NULL UNIQUE" - Поле "email" е текстово поле което трябва да е уникално и задължително
5. "message TEXT NOT NULL" - Поле "message" съхранява съобщенията на потребителите като е задължително
6. "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP" - Поле "created_at" записва времето на създаване на записа автоматично



______________________________________________________________________________________________________________________________

from flask import Flask, request, jsonify
import mysql.connector

app = Flask(__name__)

#Настройки за MySQL връзката
db_config = {
    'host': 'localhost',
    'user': 'root',
    'password': '',  # Ако има парола за MySQL, добавяме я тук
    'database': 'form_data'
}

#Функция за записване на данни в MySQL
def insert_data(name, email, message):
    try:
        #Свързване към MySQL
        conn = mysql.connector.connect(**db_config)
        cursor = conn.cursor()

        #SQL заявка за добавяне на данни
        query = "INSERT INTO users (name, email, message) VALUES (%s, %s, %s)"
        cursor.execute(query, (name, email, message))
        conn.commit()

        # Затваряне на връзката
        cursor.close()
        conn.close()
        return True
    except mysql.connector.Error as err:
        print(f"Database error: {err}")
        return False

#Route за обработка на POST заявки от формата
@app.route('/submit', methods=['POST'])
def submit_form():
    #Получаване на данните от формата
    name = request.form.get('name')
    email = request.form.get('email')
    message = request.form.get('message')

    #Проверка дали всички полета са попълнени
    if name and email and message:
        success = insert_data(name, email, message)
        if success:
            return jsonify({"message": "Data submitted successfully!"}), 200
        else:
            return jsonify({"message": "Failed to save data in database."}), 500
    else:
        return jsonify({"message": "All fields are required."}), 400

#Стартиране на сървъра
if __name__ == '__main__':
    app.run(debug=True)







Обяснение (на Python):

1. "Flask:" - Използва се за създаване на уеб сървър и обработка на заявки
2. "mysql.connector:" - За свързване към MySQL базата данни и изпълнение на SQL команди
3. "host:" - Адресът на MySQL сървъра
4. "insert_data:" - Отваря връзка към MySQL и изпълнява SQL заявка за добавяне на нов запис в таблицата users
5. "/submit:" - Обработва POST заявките, изпратени от HTML формата, получава въведените от потребителя данни,
                валидира, че всички полета са попълнени, извиква функцията insert_data, за да запише данните в базата.
               



________________________________________________________________________________________________________________________________

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Submission</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .form-container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
        }
        .form-container h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-container input, .form-container textarea, .form-container button {
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .form-container button {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
            border: none;  
        }
      textarea {
            resize: none; /* Премахва разтягането */
            height: 100px; /* Фиксира височината на текстовото поле */
        }
        .form-container button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>Contact Us</h1>
        <form action="http://localhost:5000/submit" method="POST">
            <input type="text" name="name" placeholder="Your Name" required>
            <input type="email" name="email" placeholder="Your Email" required>
            <textarea name="message" placeholder="Your Message" rows="5" required></textarea>
            <button type="submit">Submit</button>
        </form>
    </div>
</body>
</html>



Обяснение (на HTML и CSS):

1. "<html lang="en">" - Задава езика на съдържанието на страницата като английски.
2. "<meta charset="UTF-8">" - Декларира кодировката на страницата като UTF-8 за поддръжка на различни езици
3. "<meta name="viewport" content="width=device-width, initial-scale=1.0">" - Указва че страницата трябва да се адаптира за различни устройства
4. "<title>Form Submission</title>" - Задава заглавие на страницата което се показва в таба на браузъра
5. ".form-container" - Определя стиловете на контейнера на формата включително размер, цвят и сенки
6. "input, textarea, button" - Стилове за полетата за въвеждане текста и бутона включващи размери
7. "<div class="form-container">" - Контейнер, който държи формата и нейния дизайн
8. "<form action="http://localhost:5000/submit" method="POST">" - Определя че данните от формата ще бъдат изпратени към Python бекенд чрез POST заявка
9. "<input type="text" name="name" placeholder="Your Name" required>" - Текстово поле за въвеждане на име с указание че полето е задължително
10. "<input type="email" name="email" placeholder="Your Email" required>" - Поле за въвеждане на имейл адрес който трябва да е валиден и задъжителен
11. "<textarea name="message" placeholder="Your Message" rows="5" required>" - Текстова зона за съобщение с няколко реда която е задължителна
12. "<button type="submit">Submit</button>" - Бутон за изпращане на данните от формата
    
13. "font-family:" -  Определя стила на шрифта за текста в елемента
14. "background-color:" - Определя фоновия цвят на елемента
15.  "display:" - Определя как елементите се подреждат в HTML
16.  "justify-content:" - Подравнява елементите по основната ос
17.  "align-items:" - Подравнява елементите по второстепенната ос
18.  "height:" - Задава височината на елемента
19.  "margin:" - Определя външното разстояние около елемента
20.  "padding:" - Определя вътрешното разстояние между съдържанието и рамката на елемента
21.  "border-radius:" - Задава заоблени краища на рамката на елемента
22.  "box-shadow:" - Добавя сенки към елемента
23.  "text-align:" - Подравнява текста вътре в елемента
24.  "margin-bottom:" - Задава външно отстояние под елемента
25.  "color:" - Определя цвета на текста в елемента
26.  "cursor:" - Определя какъв тип курсор да се показва при поставяне на мишката върху елемента

____________________________________________________________________________________________________________________________________________________

Стартиране:

1. Стартирате MySQL сървъра чрез XAMPP и създавате базата данни.
2. Стартирате Python приложението (app.py), което създава локален уеб сървър.
3. Отваряте HTML формата в браузъра, попълвате полетата и натискате "Submit".
4. Формата изпраща данните към Python сървъра, който ги записва в MySQL базата данни.
5. Сървърът връща съобщение за успех или грешка обратно към браузъра.



Помощни сайтове: 

1. w3schools
2. Programiz compiler
3. Developer mozilla



Задача 3 ми отне приблизително 6-7 часа с обяснението и почивките.





